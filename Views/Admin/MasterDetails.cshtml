@model MasterServicePlatform.Web.Models.ViewModels.AdminMasterDetailsViewModel
@{
    Layout = "_AdminLayout";
}

<div class="container py-4">

    <h2 class="mb-4">@Model.Master.FirstName @Model.Master.LastName</h2>

    <div class="row g-4">

        <!-- LEFT COLUMN -->
        <div class="col-lg-4">

            <div class="card shadow-sm">
                <div class="card-body">

                    <p><strong>City:</strong> @Model.Master.City</p>
                    <p><strong>Profession:</strong> @Model.Master.Profession</p>
                    <p><strong>Experience:</strong> @Model.Master.ExperienceYears years</p>
                    <p><strong>Price per hour:</strong> @Model.Master.PricePerHour,00 €</p>
                    <p><strong>Phone:</strong> @Model.Master.Phone</p>

                    <p class="mt-3">
                        <strong>Verification:</strong>

                        @if (Model.Master.VerificationStatus == VerificationStatus.Verified)
                        {
                            <span class="badge bg-success">Verified</span>
                        }
                        else if (Model.Master.VerificationStatus == VerificationStatus.Rejected)
                        {
                            <span class="badge bg-danger">Rejected</span>
                        }
                        else
                        {
                            <span class="badge bg-warning text-dark">Pending</span>
                        }
                    </p>

                    <div class="d-flex gap-2 mt-3">
                        <form asp-action="VerifyMaster" asp-route-id="@Model.User.Id" method="post">
                            <button class="btn btn-success btn-sm w-100">Verify</button>
                        </form>

                        <form asp-action="RejectMaster" asp-route-id="@Model.User.Id" method="post">
                            <button class="btn btn-danger btn-sm w-100">Reject</button>
                        </form>

                        <form asp-action="ResetMasterStatus" asp-route-id="@Model.User.Id" method="post">
                            <button class="btn btn-secondary btn-sm w-100">Reset</button>
                        </form>
                    </div>

                </div>
            </div>
        </div>

        <!-- RIGHT COLUMN -->
        <div class="col-lg-8">

            <!-- DESCRIPTION -->
            <div class="card shadow-sm mb-4">
                <div class="card-body">
                    <h4>Description</h4>
                    <p class="mt-2">@Model.Master.Description</p>
                </div>
            </div>

            <!-- PORTFOLIO -->
            <div class="card shadow-sm mb-4">
                <div class="card-body">
                    <h4>Portfolio</h4>

                    @if (Model.Master.PortfolioPhotos?.Count > 0)
                    {
                        <div class="row mt-3 g-3">
                            @foreach (var photo in Model.Master.PortfolioPhotos)
                            {
                                <div class="col-md-6 col-lg-4">
                                    <img src="@photo.PhotoPath" class="img-fluid rounded shadow-sm" />
                                </div>
                            }
                        </div>
                    }
                    else
                    {
                        <p class="text-muted mt-2">No portfolio photos uploaded.</p>
                    }
                </div>
            </div>

            <!-- REVIEWS -->
            <div class="card shadow-sm mb-4">
                <div class="card-body">

                    <h4>Reviews</h4>

                    <p><strong>Average rating:</strong> @Model.AverageRating</p>

                    @if (Model.Reviews.Count > 0)
                    {
                        @foreach (var r in Model.Reviews)
                        {
                            <div class="border rounded p-3 mb-3 bg-light">
                                <strong>@r.Rating ★</strong>
                                <p>@r.Comment</p>
                                <small class="text-muted">@r.CreatedAt</small>
                            </div>
                        }
                    }
                    else
                    {
                        <p class="text-muted">No reviews yet.</p>
                    }
                </div>
            </div>

            <!-- ORDERS -->
            <div class="card shadow-sm">
                <div class="card-body">
                    <h4>Orders</h4>

                    <p><strong>Total:</strong> @Model.Orders.Count</p>

                    @if (Model.Orders.Count > 0)
                    {
                        <ul>
                            @foreach (var o in Model.Orders)
                            {
                                <li>@o.Id — @o.Status</li>
                            }
                        </ul>
                    }
                    else
                    {
                        <p class="text-muted">No orders found.</p>
                    }
                </div>
            </div>

        </div>
    </div>
</div>
